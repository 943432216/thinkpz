<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>DSP注册管理</title>
	<link href="__TMPL__/public/thinkpz/layui/css/layui.css" rel="stylesheet">
	<script src="__TMPL__/public/thinkpz/layui/layui.js" charset="utf-8"></script>
</head>
<body>
	<div style="height: 30px;"></div>
	<div class="layui-btn-group demoTable">
	  <button class="layui-btn" data-type="getCheckData">处理选中</button>
	</div>
	 
	<table class="layui-table" lay-data="{url:'{url:(\'portal/admin_dsp\')}', page:true, id:'idTest'}" lay-filter="demo">
	  <thead>
	    <tr>
	      <th lay-data="{type:'checkbox', fixed: 'left'}"></th>
	      <th lay-data="{field:'id', width:80, sort: true, fixed: true}">ID</th>
	      <th lay-data="{field:'dsp_name', width:100}">用户名</th>
	      <th lay-data="{field:'user_phone', width:100}">联系电话</th>
	      <th lay-data="{field:'create_time', width:100}">创建时间</th>
	      <th lay-data="{field:'user_city', width:100}">所在城市</th>
	      <th lay-data="{field:'user_ip', width:100}">注册地IP</th>
	      <th lay-data="{fixed: 'right', width:178, align:'center', toolbar: '#barDemo'}"></th>
	    </tr>
	  </thead>
	</table>
	 
	<script type="text/html" id="barDemo">
	  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="handle">审核通过</a>
	  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
	</script>
	               
	  
	<script>
		layui.use('table', function(){
		  var table = layui.table;
		  //监听表格复选框选择
		  // table.on('checkbox(demo)', function(obj){
		  //   console.log(obj)
		  // });
		  //监听工具条
		  table.on('tool(demo)', function(obj){
		    var data = obj.data;
		    if(obj.event === 'handle'){
		      layer.msg('ID：'+ data.id + ' 的查看操作');
		    } else if(obj.event === 'del'){
		      layer.confirm('真的删除行么', function(index){
		        obj.del();
		        layer.close(index);
		      });
		    }
		  });
		  
		  var $ = layui.$, active = {
		    getCheckData: function(){ //获取选中数据
		      var checkStatus = table.checkStatus('idTest')
		      ,data = checkStatus.data;
		      layer.alert(JSON.stringify(data));
		    }
		  };
		  
		  $('.demoTable .layui-btn').on('click', function(){
		    var type = $(this).data('type');
		    active[type] ? active[type].call(this) : '';
		  });
		});
	</script>
</body>
</html>